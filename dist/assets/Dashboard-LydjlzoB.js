import{r as a,R as A,J as y,j as e,A as I,B as g,E as j,F as p}from"./index-ffYVKfzY.js";import{C as O,B as q,p as z,a as G,b as Q,c as U,d as V,L as X}from"./chart-PbnHAvS9.js";import{C as b}from"./CCardHeader-za_rSDav.js";import{C}from"./CCardFooter-r3-Gqetc.js";import{C as K,a as M}from"./CProgress-L3XnTd0E.js";const F="label";function _(s,r){typeof s=="function"?s(r):s&&(s.current=r)}function Y(s,r){const c=s.options;c&&r&&Object.assign(c,r)}function $(s,r){s.labels=r}function H(s,r){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:F;const d=[];s.datasets=r.map(o=>{const l=s.datasets.find(u=>u[c]===o[c]);return!l||!o.data||d.includes(l)?{...o}:(d.push(l),Object.assign(l,o),l)})}function ee(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:F;const c={labels:[],datasets:[]};return $(c,s.labels),H(c,s.datasets,r),c}function te(s,r){const{height:c=150,width:d=300,redraw:o=!1,datasetIdKey:l,type:u,data:i,options:h,plugins:D=[],fallbackContent:E,updateMode:T,...w}=s,v=a.useRef(null),n=a.useRef(),R=()=>{v.current&&(n.current=new O(v.current,{type:u,data:ee(i,l),options:h&&{...h},plugins:D}),_(r,n.current))},N=()=>{_(r,null),n.current&&(n.current.destroy(),n.current=null)};return a.useEffect(()=>{!o&&n.current&&h&&Y(n.current,h)},[o,h]),a.useEffect(()=>{!o&&n.current&&$(n.current.config.data,i.labels)},[o,i.labels]),a.useEffect(()=>{!o&&n.current&&i.datasets&&H(n.current.config.data,i.datasets,l)},[o,i.datasets]),a.useEffect(()=>{n.current&&(o?(N(),setTimeout(R)):n.current.update(T))},[o,h,i.labels,i.datasets,T]),a.useEffect(()=>{n.current&&(N(),setTimeout(R))},[u]),a.useEffect(()=>(R(),()=>N()),[]),A.createElement("canvas",Object.assign({ref:v,role:"img",height:c,width:d},w),E)}const se=a.forwardRef(te);function ae(s,r){return O.register(r),a.forwardRef((c,d)=>A.createElement(se,Object.assign({},c,{ref:d,type:s})))}const re=ae("bar",q);O.register(z,G,Q,U,V,X);const de=()=>{const[s,r]=a.useState([]),[c,d]=a.useState([]),[o,l]=a.useState([]),[u,i]=a.useState([]),[h,D]=a.useState([]),[E,T]=a.useState({}),[w,v]=a.useState(0),[n,R]=a.useState(0);a.useEffect(()=>{y.get("http://localhost:5000/api/users").then(t=>r(t.data)).catch(t=>console.error("Error fetching clients data:",t)),y.get("http://localhost:5000/api/rooms").then(t=>d(t.data)).catch(t=>console.error("Error fetching rooms data:",t)),y.get("http://localhost:5000/api/reservations").then(t=>{l(t.data),N(t.data)}).catch(t=>console.error("Error fetching reservations data:",t)),y.get("http://localhost:5000/api/staff").then(t=>i(t.data)).catch(t=>console.error("Error fetching staff data:",t)),y.get("http://localhost:3001/tasks").then(t=>J(t.data)).catch(t=>console.error("Error fetching tasks data:",t))},[]);const N=t=>{const f={};t.forEach(x=>{const S=x.date_reserve;f[S]=(f[S]||0)+1});const B=Object.keys(f).sort((x,S)=>new Date(x)-new Date(S)),m={};B.forEach(x=>{m[x]=f[x]}),T(m)},J=t=>{const f=t.filter(m=>m.status.toLowerCase()==="completed").length,B=t.filter(m=>m.status.toLowerCase()==="pending").length;D(t),v(f),R(B)},W={labels:Object.keys(E).map(t=>new Date(t).toLocaleDateString()),datasets:[{label:"Reservations",data:Object.values(E),backgroundColor:"rgba(54, 162, 235, 0.7)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]},Z={responsive:!0,scales:{x:{title:{display:!0,text:"Date"},ticks:{autoSkip:!0,maxRotation:45,minRotation:30}},y:{beginAtZero:!0,title:{display:!0,text:"Number of Reservations"}}},plugins:{tooltip:{callbacks:{label:function(t){return`Reservations: ${t.raw}`}}}}},k=w+n,P=k?Math.round(w/k*100):0,L=k?Math.round(n/k*100):0;return e.jsxs(e.Fragment,{children:[e.jsxs(I,{children:[e.jsx(g,{xs:12,md:6,xl:3,children:e.jsxs(j,{className:"mb-4 text-white bg-primary shadow-lg",children:[e.jsx(b,{className:"text-center",children:e.jsx("h4",{children:"Total Clients"})}),e.jsx(p,{children:e.jsx("div",{className:"fs-3 fw-semibold text-center",children:s.length})}),e.jsx(C,{className:"text-center",children:"Registered Customers"})]})}),e.jsx(g,{xs:12,md:6,xl:3,children:e.jsxs(j,{className:"mb-4 text-white bg-success shadow-lg",children:[e.jsx(b,{className:"text-center",children:e.jsx("h4",{children:"Total Rooms"})}),e.jsx(p,{children:e.jsx("div",{className:"fs-3 fw-semibold text-center",children:c.length})}),e.jsx(C,{className:"text-center",children:"Available Rooms"})]})}),e.jsx(g,{xs:12,md:6,xl:3,children:e.jsxs(j,{className:"mb-4 text-white bg-danger shadow-lg",children:[e.jsx(b,{className:"text-center",children:e.jsx("h4",{children:"Total Reservations"})}),e.jsx(p,{children:e.jsx("div",{className:"fs-3 fw-semibold text-center",children:o.length})}),e.jsx(C,{className:"text-center",children:"Total Bookings"})]})}),e.jsx(g,{xs:12,md:6,xl:3,children:e.jsxs(j,{className:"mb-4 text-white bg-warning shadow-lg",children:[e.jsx(b,{className:"text-center",children:e.jsx("h4",{children:"Total Staff"})}),e.jsx(p,{children:e.jsx("div",{className:"fs-3 fw-semibold text-center",children:u.length})}),e.jsx(C,{className:"text-center",children:"Staff Members"})]})})]}),e.jsxs(I,{children:[e.jsx(g,{xs:12,md:6,children:e.jsxs(j,{className:"mb-4",children:[e.jsx(b,{className:"text-center",children:e.jsx("h4",{children:"Task Progress"})}),e.jsxs(p,{children:[e.jsxs("h6",{children:["Completed Tasks (",w,")"]}),e.jsx(K,{className:"mb-3",children:e.jsxs(M,{value:P,color:"success",children:[P,"%"]})}),e.jsxs("h6",{children:["Pending Tasks (",n,")"]}),e.jsx(K,{children:e.jsxs(M,{value:L,color:"warning",children:[L,"%"]})})]}),e.jsxs(C,{className:"text-center",children:["Total Tasks: ",k]})]})}),e.jsx(g,{xs:12,md:6,children:e.jsxs(j,{className:"mb-4",children:[e.jsx(b,{className:"text-center",children:e.jsx("h4",{children:"Reservations by Date"})}),e.jsx(p,{children:e.jsx(re,{data:W,options:Z})}),e.jsx(C,{className:"text-center",children:"Reservations per day for the month"})]})})]})]})};export{de as default};
