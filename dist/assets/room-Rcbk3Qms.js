import{r as a,J as u,j as e}from"./index-ffYVKfzY.js";import{C as c}from"./index.esm-DxGkv9hs.js";import{c as z}from"./cil-pen-53d2I-C-.js";import{c as D}from"./cil-check-Dqg5Ixbd.js";import{c as M}from"./cil-x-0440B5Ce.js";import{L as B}from"./DefaultLayout-1dw4Iart.js";import{M as i,B as C}from"./Modal-DHu8A-az.js";import{F as s}from"./Form-CqvpA1Dk.js";import"./cil-user-Ddrdy7PS.js";import"./index-C9dK0-s5.js";import"./ThemeProvider-BV5dC5GT.js";import"./hasClass-DoSno_Ds.js";const W=()=>{const[o,d]=a.useState([]),[b,N]=a.useState([]),[y,v]=a.useState([]),[f,R]=a.useState(""),[k,g]=a.useState(!1),[l,h]=a.useState(null),E=async()=>{try{const t=await u.get("http://localhost:3001/rooms");d(t.data)}catch(t){console.error("Error loading rooms:",t)}},S=async()=>{try{const t=await u.get("http://localhost:3001/room_types");N(t.data)}catch(t){console.error("Error loading room types:",t)}},q=async()=>{try{const t=await u.get("http://localhost:3001/room_equipment");v(t.data)}catch(t){console.error("Error loading equipment:",t)}};a.useEffect(()=>{E(),S(),q()},[]);const T=o.filter(t=>t.id&&t.id.toLowerCase().includes(f.toLowerCase())),I=t=>{R(t.target.value)},w=t=>{const r=b.find(n=>n.id===t);return r?r.price:"N/A"},F=t=>t.map(r=>{const n=y.find(p=>p.id===r);return n?n.name:"Unknown"}).join(", "),x=(t,r)=>{d(o.map(n=>n.id===t?{...n,status:r}:n))},A=t=>{h(t),g(!0)},m=()=>{g(!1),h(null)},L=()=>{l&&d(o.map(t=>t.id===l.id?l:t)),m()},j=t=>{const{name:r,value:n}=t.target;h(p=>({...p,[r]:n}))};return e.jsxs("div",{className:"container mt-5",children:[e.jsx("h1",{className:"text-start",children:"Rooms"}),e.jsx("input",{type:"text",className:"form-control mb-3",placeholder:"Filter by room type",value:f,onChange:I}),e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{className:"thead-light text-center bg-light",style:{backgroundColor:"#b4d3ff"},children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Equipment"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:T.map(t=>e.jsxs("tr",{className:"text-center",children:[e.jsx("td",{children:t.id}),e.jsx("td",{children:t.typeId||"N/A"}),e.jsx("td",{children:w(t.typeId)||"N/A"}),e.jsx("td",{children:t.status||"N/A"}),e.jsx("td",{children:F(t.equipment)||"N/A"}),e.jsxs("td",{className:"text-center",children:[e.jsx("button",{className:"btn btn-link",onClick:()=>A(t),children:e.jsx(c,{icon:z,size:"lg"})}),e.jsx("button",{className:"btn btn-link text-success",onClick:()=>x(t.id,"occupied"),disabled:t.status==="occupied",children:e.jsx(c,{icon:D,size:"lg"})}),e.jsx("button",{className:"btn btn-link text-danger",onClick:()=>x(t.id,"available"),disabled:t.status==="available",children:e.jsx(c,{icon:M,size:"lg"})}),e.jsx("button",{className:"btn btn-link text-purple",onClick:()=>x(t.id,"maintenance"),disabled:t.status==="maintenance",children:e.jsx(c,{icon:B,size:"lg"})})]})]},t.id))})]}),e.jsxs("div",{className:"d-flex justify-content-between mt-5",children:[e.jsxs("div",{className:"me-2",style:{flex:1,maxHeight:"400px",overflowY:"auto"},children:[e.jsx("h2",{children:"Room Equipment"}),e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{className:"thead-light text-center",style:{backgroundColor:"#b4d3ff"},children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Available"})]})}),e.jsx("tbody",{children:y.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.id}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.description}),e.jsx("td",{children:t.available?"Yes":"No"})]},t.id))})]})]}),e.jsxs("div",{className:"ms-2",style:{flex:1},children:[e.jsx("h2",{children:"Room Types"}),e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{className:"thead-light text-center",style:{backgroundColor:"#b4d3ff"},children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Capacity"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Size"}),e.jsx("th",{children:"Floor"})]})}),e.jsx("tbody",{children:b.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.id}),e.jsx("td",{children:t.type}),e.jsx("td",{children:t.capacity}),e.jsx("td",{children:t.price}),e.jsx("td",{children:t.size}),e.jsx("td",{children:t.hotel_floor})]},t.id))})]})]})]}),e.jsxs(i,{show:k,onHide:m,children:[e.jsx(i.Header,{closeButton:!0,children:e.jsx(i.Title,{children:"Edit Room"})}),e.jsx(i.Body,{children:l&&e.jsxs(s,{children:[e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"ID"}),e.jsx(s.Control,{type:"text",name:"id",value:l.id,readOnly:!0})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Type ID"}),e.jsx(s.Control,{type:"text",name:"typeId",value:l.typeId,onChange:j})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Status"}),e.jsx(s.Control,{type:"text",name:"status",value:l.status,onChange:j})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Equipment"}),e.jsx(s.Control,{type:"text",name:"equipment",value:l.equipment.join(", "),onChange:j})]})]})}),e.jsxs(i.Footer,{children:[e.jsx(C,{variant:"secondary",onClick:m,children:"Close"}),e.jsx(C,{variant:"primary",onClick:L,children:"Save Changes"})]})]})]})};export{W as default};
